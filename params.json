{"name":"ccuio adapter vitotronic","tagline":"Adapter für ccu.io um Daten mittels vcontrold aus einer vitotronic abzufragen.","body":"# ccuio_adapter_vitotronic\r\n\r\nEin Adapter für ccu.io um Daten mittels vcontrold aus einer vitotronic abzufragen und in ccu.io zu visualisieren oder manipulieren.\r\n\r\n## Voraussetzungen\r\n\r\nEs muss bereits ein vcontrold laufen und über einen Optolink-Adapter mit der Vitotronic verbunden sein. Außerdem muss natürlich ein ccu.io installiert sein.\r\n\r\nSollte eines davon nicht auf Dich zutreffen, informiere Dich zunächst auf:\r\n\r\n1. [http://openv.wikispaces.com/vcontrold](http://openv.wikispaces.com/vcontrold)\r\n\r\n2. [http://ccu.io/](http://ccu.io/)\r\n\r\nBei mir läuft beides auf einem Banana Pi. Als Optolink-Adapter verwende ich den Nachbau, der über ein Community-Mitglied des Openv Wikis verfügbar ist.\r\n\r\n## Installation\r\n\r\nNach dem Download z.B. der ZIP-Datei muss das Verzeichnis vitotronic (unterhalb von adapter) in des Unterverzeichnis \"adapter\" Eurer ccu.io Installation kopiert werden.\r\nDie Datei aus dem Verzeichnis datastore in das gleichnamige Verzeichnis unterhalb von ccu.io\r\n\r\n## Konfiguration\r\n\r\nIn der Konfiguration des Adapters könnt Ihr folgende Dinge einstellen:\r\n\r\n**Enabled:** true, wenn der Adapter aktiviert werden soll. Sonst false\r\n\r\n**ccu.io.log schreiben?:** true, wenn Informationen in die ccu.io Log-Datei geschrieben werden sollen - z.B. für das Aufspüren von Fehlern.\r\n\r\n**vcontrold - Host:** IP-Adresse des Systems, auf dem vcontrold läuft. _127.0.0.1_ (Default), wenn vcontrold und ccu.io auf dem gleichen System laufen.\r\n\r\n**Pfad zu vcontrold Konfigurationen:** Verzeichnis, in dem die XML-Konfigurationsdateien von vcontrold liegen. Standard ist _/etc/vcontrold/_. Wenn vcontrold auf einem anderen Rechner läuft, können die XML-Dateien einfach auf das System kopiert werden, auf dem ccu.io läuft.\r\n\r\nWenn vcontrol bei Euch lauffähig ist, kennt Ihr sicherlich die Dateien vcontrold.xml und vito.xml, die die Konfigurationen enthalten. Diese kann der Adapter selbständig auslesen, was aber einige Voraussetzungen erfordert (Die in den fertigen Configs, die man so findet immer der Fall ist)\r\n\r\n**Beispiel vito.xml**\r\n\r\n```xml\r\n    <command name='getTempRaumRedSollM1' protocmd='getaddr'>\r\n        <addr>2307</addr>\r\n        <len>1</len>\r\n        <unit>UTI</unit>\r\n        <description>Ermittle die Raumsolltemperatur reduziert M1 in Grad C</description>\r\n    </command>\r\n    <command name='setTempRaumRedSollM1' protocmd='setaddr'>\r\n        <addr>2307</addr>\r\n        <len>1</len>\r\n        <unit>UTI</unit>\r\n        <description>Setze die Raumsolltemperatur reduziert M1 in Grad C</description>\r\n    </command>\r\n```\r\n\r\nIm Feld `protocmd` muss hier immer `getaddr` oder `setaddr` stehen. Dies ist bei den überall veröffentlichten Configs meistens der Fall, kann aber theoretisch auch anders heißen.\r\nDamit der Adapter get- und set- Events auf den gleichen Datenpunkt zurückführen kann, müssen die Commands immer den gleichen Namen tragen.\r\n\r\nz.B. setDatenpunkt1 und getDatenpunkt1\r\n\r\nIn diesem Fall gibt es in ccu.io einen neuen Datenpunkt, der nur Datenpunkt1 heißt. Das get und set wird also abgeschnitten.\r\nNatürlich ist der set-Command optional. Viele Informationen aus der vitotronic sind ja readonly.\r\n\r\nSind alle Daten eingegeben, kann mit dem Button \"update\" der Prozess gestartet werden, der die XML Dateien einliest.\r\nDanach erscheinen darunter alle Datenpunkte, die der Adapter gefunden hat.\r\nHier muss dann entschieden werden, welche Datenpunkte geloggt werden sollen und wie oft:\r\n![Logging-Config](http://img5.fotos-hochladen.net/uploads/loggingjybn9es7hi.png)\r\n\r\nHierzu einige Empfehlungen: Aufgrund technischer Eigenschaften der Vitotronic-Schnittstelle kann es leicht mal 5 Sekunden dauern, um einen Wert abzufragen. Gibt man nun bei 30 Datenpunkten an, dass die Werte \"möglichst oft\" oder \"alle 10 Sekunden\" geloggt werden sollen, wird das dazu führen, dass man nur ca. 1 Wert je 2-3 Minuten hat. Das kann reichen, um den einen oder anderen Peak in einer Grafik zu verpassen. Man sollte also genau überlegen, welche Daten man wirklich braucht und sinnvolle Intervalle wählen. Bei schnell ändernden Werten, wie der Leistung oder der Kesseltemperatur sollte man z.B. \"möglichst oft\" auswählen. Bei der Aussentemperatur reichen sicher auch mehrere Minuten.\r\n\r\nHier mal ein Beispiel einer mit Highcharts erstellen Grafik mit einigen Daten aus der Vitotronic.\r\n![Beispielgraph](http://www.fotos-hochladen.net/uploads/aufgedreht4viv63duj5qk0.png)\r\n\r\nAbschließend sei gesagt, dass ich keinerlei Verantwortung für eventuelle Schäden an was auch immer übernehme. Bevor man Daten in der Vitotronic setzt, sollte man genau wissen, welche Werte und Einheiten überhaupt möglich, erlaut oder sinnvoll sind.","google":"UA-15402162-4","note":"Don't delete this file! It's used internally to help with page regeneration."}